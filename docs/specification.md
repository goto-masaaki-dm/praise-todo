# Praise Todo 仕様書

## プロジェクト概要

### 基本情報

- **プロジェクト名**: Praise Todo
- **目的**: 進捗状態に応じて賞賛し、ユーザーのやる気を引き出すTodoアプリケーション
- **バージョン**: 0.1.0

### 技術スタック

- **フレームワーク**: Next.js 16
- **UIライブラリ**: React 19
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **データベース**: Supabase（PostgreSQL）
- **ORM**: Prisma
- **パッケージマネージャー**: pnpm
- **デプロイ先**: Vercel

### アーキテクチャ

- **設計パターン**: クリーンアーキテクチャ
- **データ保存**: ローカルストレージ + Supabase（PostgreSQL）

## 機能要件

### タスク管理機能

#### 基本機能

- **タスクの追加**: 新しいタスクを作成できる
- **タスクの編集**: 既存のタスクを編集できる
- **タスクの削除**: タスクを削除できる
- **タスクの完了**: タスクを完了状態に変更できる

#### 拡張機能

- **優先度設定**: タスクに優先度（高・中・低など）を設定できる
- **期限設定**: タスクに期限日時を設定できる
- **カテゴリ分類**: タスクをカテゴリで分類できる
- **タグ機能**: タスクに複数のタグを付与できる
- **サブタスク**: タスクにサブタスクを追加できる
- **メモ・詳細情報**: タスクに詳細なメモや説明を追加できる
- **フィルター・ソート機能**: 
  - 優先度、カテゴリ、タグ、期限、完了状態などでフィルターできる
  - 優先度、期限、作成日時などでソートできる

### 賞賛・モチベーション機能

#### 励ましメッセージ

- タスク完了時やマイルストーン達成時に励ましメッセージを表示
- メッセージは状況に応じて動的に変更
- ポジティブで前向きな表現を使用

#### アニメーション・エフェクト

- タスク完了時に祝福アニメーションを表示
- マイルストーン達成時に特別なエフェクトを表示
- スムーズで心地よい視覚的フィードバックを提供

#### ポイント・スコアシステム

- タスク完了に応じてポイントを付与
- 優先度や難易度に応じてポイントを調整
- 累計ポイントを表示し、成長を可視化

#### バッジ・実績システム

- 特定の条件を満たすとバッジを獲得
- 例：「10タスク完了」「7日連続達成」「全カテゴリ制覇」など
- 獲得したバッジを一覧表示

#### 連続日数カウント（ストリーク）

- 毎日タスクを完了すると連続日数がカウントされる
- 連続日数の記録を表示
- 連続記録が途切れないようモチベーションを維持

### 進捗追跡機能

#### タスク完了率

- 全体のタスク完了率を計算・表示
- カテゴリ別の完了率も表示
- 期間別（日・週・月）の完了率を追跡

#### 連続実行日数の追跡

- 毎日少なくとも1つのタスクを完了した日数を記録
- 最長連続記録を表示
- 現在の連続記録を表示

#### 累計完了タスク数の記録

- これまでに完了したタスクの総数を記録
- マイルストーン（10、50、100、500、1000など）を表示

#### カテゴリ別進捗の可視化

- 各カテゴリの完了タスク数を表示
- カテゴリ別の進捗率を可視化
- グラフやチャートで表示

#### 時間ベースの進捗

- 特定の期間（1週間、1ヶ月など）でのタスク完了数を追跡
- 期間別の目標設定と達成状況を表示
- 例：「1週間で10タスク完了」などの目標

### 賞賛タイミング（設定可能）

ユーザーは以下のタイミングで賞賛を表示するか設定できる：

- **タスク完了時**: タスクを完了した瞬間に賞賛を表示
- **マイルストーン達成時**: 特定のマイルストーン（例：10タスク完了）を達成した時に表示
- **連続日数達成時**: 特定の連続日数（例：7日、30日）を達成した時に表示
- **1日の終わりにサマリー表示**: 1日の終わりにその日の成果をまとめて表示
- **1日の最初のタスク完了時**: その日の最初のタスクを完了した時に特別な賞賛を表示
- **全てのタスク完了時**: 全てのタスクを完了した時に特別な賞賛を表示

## データモデル設計

### データ保存戦略

- **Supabase（PostgreSQL）**: 永続的なデータ保存に使用
- **ローカルストレージ**: オフライン対応や一時的なデータ保存に使用
- **データ同期**: ローカルストレージとSupabase間でデータを同期

### Prisma ORM

- Prismaを使用してデータベースアクセス層を実装
- 型安全なデータアクセスを提供
- マイグレーション管理をPrismaで行う

## UI/UX要件

### レスポンシブデザイン

- デスクトップ、タブレット、スマートフォンに対応
- 画面サイズに応じてレイアウトを最適化

### ダークモード対応

- ライトモードとダークモードを切り替え可能
- ユーザーの好みに応じて設定を保存

### 賞賛アニメーションの仕様

- パフォーマンスを考慮した軽量なアニメーション
- 過度に派手にならないよう配慮
- ユーザーがアニメーションを無効化できるオプションを提供

### アクセシビリティ

- キーボードナビゲーションに対応
- スクリーンリーダーに対応
- 適切なコントラスト比を維持

## アーキテクチャ設計

### クリーンアーキテクチャの採用

本プロジェクトはクリーンアーキテクチャの原則に基づいて設計されます。

#### レイヤー構造

1. **Domain層（ドメイン層）**
   - エンティティ: ビジネスオブジェクト
   - ドメインモデル: ビジネスルールとロジック
   - 値オブジェクト: 不変な値の表現

2. **Application層（アプリケーション層）**
   - ユースケース: ビジネスロジックの実装
   - インターフェース: リポジトリやサービスの契約
   - DTO: データ転送オブジェクト

3. **Infrastructure層（インフラストラクチャ層）**
   - Supabaseクライアント: データベース接続
   - Prismaクライアント: ORM実装
   - リポジトリ実装: データアクセスの実装
   - 外部サービス連携: サードパーティサービスとの連携

4. **Presentation層（プレゼンテーション層）**
   - UIコンポーネント: Reactコンポーネント
   - ページ: Next.jsページコンポーネント
   - 状態管理: クライアント側の状態管理

#### 依存関係の方向

- 外側から内側への依存（依存性逆転の原則）
- 内側の層は外側の層に依存しない
- インターフェースを通じて依存関係を定義

#### インターフェースと実装の分離

- 各層のインターフェースを定義
- 実装はインターフェースに依存
- テスト容易性を向上

## 技術仕様

### パッケージマネージャー

- **pnpm**: パッケージのインストールと管理に使用

### Supabase（PostgreSQL）設定

- Supabaseプロジェクトの作成と設定
- データベース接続の設定
- Row Level Security（RLS）の設定（必要に応じて）

### Prisma ORM設定とマイグレーション

- Prismaスキーマの定義
- データベースマイグレーションの管理
- Prismaクライアントの生成と使用

### Vercelデプロイ設定

- Vercelプロジェクトの作成
- 環境変数の設定
- ビルド設定の最適化

### 認証要件

- 必要に応じてSupabase認証を実装
- ユーザーごとのデータ分離

### API設計

- Next.js API RoutesまたはServer Actionsを使用
- RESTfulな設計原則に従う
- エラーハンドリングの実装

### ディレクトリ構造

クリーンアーキテクチャに基づくディレクトリ構造：

```
src/
├── domain/          # Domain層
│   ├── entities/    # エンティティ
│   ├── models/      # ドメインモデル
│   └── value-objects/ # 値オブジェクト
├── application/      # Application層
│   ├── use-cases/   # ユースケース
│   ├── interfaces/  # インターフェース
│   └── dto/         # DTO
├── infrastructure/  # Infrastructure層
│   ├── database/    # データベース実装
│   ├── repositories/ # リポジトリ実装
│   └── services/    # 外部サービス連携
└── presentation/    # Presentation層
    ├── components/  # UIコンポーネント
    ├── pages/       # ページ（Next.js App Router）
    └── hooks/       # カスタムフック
```

## 非機能要件

### パフォーマンス

- ページ読み込み時間の最適化
- データ取得の効率化
- 不要な再レンダリングの防止

### セキュリティ

- データの暗号化（必要に応じて）
- SQLインジェクション対策（Prismaで自動対応）
- XSS対策

### 保守性

- コードの可読性と保守性を重視
- 適切なコメントとドキュメント
- テストコードの作成（必要に応じて）

## 今後の拡張予定

- チーム機能（複数ユーザーでの共有）
- 通知機能
- データエクスポート/インポート機能
- テーマカスタマイズ機能



